Creating test database for alias 'default'...
....E.EE.
======================================================================
ERROR: test_impede_paciente_nao_disponivel (terapia.tests.test_consulta_model.ConsultaModelTest.test_impede_paciente_nao_disponivel)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/home/andrade/Desktop/easy-talk-main/django-easy-talk/.venv/lib/python3.12/site-packages/django/db/backends/utils.py", line 105, in _execute
    return self.cursor.execute(sql, params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/andrade/Desktop/easy-talk-main/django-easy-talk/.venv/lib/python3.12/site-packages/django/db/backends/sqlite3/base.py", line 360, in execute
    return super().execute(query, params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.IntegrityError: NOT NULL constraint failed: terapia_consulta.data_hora_agendada

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/andrade/Desktop/easy-talk-main/django-easy-talk/terapia/tests/test_consulta_model.py", line 118, in test_impede_paciente_nao_disponivel
    consulta_que_ocupa_o_paciente = Consulta.objects.create(
                                    ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/andrade/Desktop/easy-talk-main/django-easy-talk/.venv/lib/python3.12/site-packages/django/db/models/manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/andrade/Desktop/easy-talk-main/django-easy-talk/.venv/lib/python3.12/site-packages/django/db/models/query.py", line 665, in create
    obj.save(force_insert=True, using=self.db)
  File "/home/andrade/Desktop/easy-talk-main/django-easy-talk/.venv/lib/python3.12/site-packages/django/db/models/base.py", line 902, in save
    self.save_base(
  File "/home/andrade/Desktop/easy-talk-main/django-easy-talk/.venv/lib/python3.12/site-packages/django/db/models/base.py", line 1008, in save_base
    updated = self._save_table(
              ^^^^^^^^^^^^^^^^^
  File "/home/andrade/Desktop/easy-talk-main/django-easy-talk/.venv/lib/python3.12/site-packages/django/db/models/base.py", line 1169, in _save_table
    results = self._do_insert(
              ^^^^^^^^^^^^^^^^
  File "/home/andrade/Desktop/easy-talk-main/django-easy-talk/.venv/lib/python3.12/site-packages/django/db/models/base.py", line 1210, in _do_insert
    return manager._insert(
           ^^^^^^^^^^^^^^^^
  File "/home/andrade/Desktop/easy-talk-main/django-easy-talk/.venv/lib/python3.12/site-packages/django/db/models/manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/andrade/Desktop/easy-talk-main/django-easy-talk/.venv/lib/python3.12/site-packages/django/db/models/query.py", line 1873, in _insert
    return query.get_compiler(using=using).execute_sql(returning_fields)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/andrade/Desktop/easy-talk-main/django-easy-talk/.venv/lib/python3.12/site-packages/django/db/models/sql/compiler.py", line 1882, in execute_sql
    cursor.execute(sql, params)
  File "/home/andrade/Desktop/easy-talk-main/django-easy-talk/.venv/lib/python3.12/site-packages/django/db/backends/utils.py", line 79, in execute
    return self._execute_with_wrappers(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/andrade/Desktop/easy-talk-main/django-easy-talk/.venv/lib/python3.12/site-packages/django/db/backends/utils.py", line 92, in _execute_with_wrappers
    return executor(sql, params, many, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/andrade/Desktop/easy-talk-main/django-easy-talk/.venv/lib/python3.12/site-packages/django/db/backends/utils.py", line 100, in _execute
    with self.db.wrap_database_errors:
  File "/home/andrade/Desktop/easy-talk-main/django-easy-talk/.venv/lib/python3.12/site-packages/django/db/utils.py", line 91, in __exit__
    raise dj_exc_value.with_traceback(traceback) from exc_value
  File "/home/andrade/Desktop/easy-talk-main/django-easy-talk/.venv/lib/python3.12/site-packages/django/db/backends/utils.py", line 105, in _execute
    return self.cursor.execute(sql, params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/andrade/Desktop/easy-talk-main/django-easy-talk/.venv/lib/python3.12/site-packages/django/db/backends/sqlite3/base.py", line 360, in execute
    return super().execute(query, params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
django.db.utils.IntegrityError: NOT NULL constraint failed: terapia_consulta.data_hora_agendada

======================================================================
ERROR: test_impede_psicologo_nao_disponivel (terapia.tests.test_consulta_model.ConsultaModelTest.test_impede_psicologo_nao_disponivel)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/home/andrade/Desktop/easy-talk-main/django-easy-talk/.venv/lib/python3.12/site-packages/django/db/backends/utils.py", line 105, in _execute
    return self.cursor.execute(sql, params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/andrade/Desktop/easy-talk-main/django-easy-talk/.venv/lib/python3.12/site-packages/django/db/backends/sqlite3/base.py", line 360, in execute
    return super().execute(query, params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.IntegrityError: NOT NULL constraint failed: terapia_consulta.data_hora_agendada

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/andrade/Desktop/easy-talk-main/django-easy-talk/terapia/tests/test_consulta_model.py", line 101, in test_impede_psicologo_nao_disponivel
    consulta_que_ocupa_o_psicologo = Consulta.objects.create(
                                     ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/andrade/Desktop/easy-talk-main/django-easy-talk/.venv/lib/python3.12/site-packages/django/db/models/manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/andrade/Desktop/easy-talk-main/django-easy-talk/.venv/lib/python3.12/site-packages/django/db/models/query.py", line 665, in create
    obj.save(force_insert=True, using=self.db)
  File "/home/andrade/Desktop/easy-talk-main/django-easy-talk/.venv/lib/python3.12/site-packages/django/db/models/base.py", line 902, in save
    self.save_base(
  File "/home/andrade/Desktop/easy-talk-main/django-easy-talk/.venv/lib/python3.12/site-packages/django/db/models/base.py", line 1008, in save_base
    updated = self._save_table(
              ^^^^^^^^^^^^^^^^^
  File "/home/andrade/Desktop/easy-talk-main/django-easy-talk/.venv/lib/python3.12/site-packages/django/db/models/base.py", line 1169, in _save_table
    results = self._do_insert(
              ^^^^^^^^^^^^^^^^
  File "/home/andrade/Desktop/easy-talk-main/django-easy-talk/.venv/lib/python3.12/site-packages/django/db/models/base.py", line 1210, in _do_insert
    return manager._insert(
           ^^^^^^^^^^^^^^^^
  File "/home/andrade/Desktop/easy-talk-main/django-easy-talk/.venv/lib/python3.12/site-packages/django/db/models/manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/andrade/Desktop/easy-talk-main/django-easy-talk/.venv/lib/python3.12/site-packages/django/db/models/query.py", line 1873, in _insert
    return query.get_compiler(using=using).execute_sql(returning_fields)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/andrade/Desktop/easy-talk-main/django-easy-talk/.venv/lib/python3.12/site-packages/django/db/models/sql/compiler.py", line 1882, in execute_sql
    cursor.execute(sql, params)
  File "/home/andrade/Desktop/easy-talk-main/django-easy-talk/.venv/lib/python3.12/site-packages/django/db/backends/utils.py", line 79, in execute
    return self._execute_with_wrappers(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/andrade/Desktop/easy-talk-main/django-easy-talk/.venv/lib/python3.12/site-packages/django/db/backends/utils.py", line 92, in _execute_with_wrappers
    return executor(sql, params, many, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/andrade/Desktop/easy-talk-main/django-easy-talk/.venv/lib/python3.12/site-packages/django/db/backends/utils.py", line 100, in _execute
    with self.db.wrap_database_errors:
  File "/home/andrade/Desktop/easy-talk-main/django-easy-talk/.venv/lib/python3.12/site-packages/django/db/utils.py", line 91, in __exit__
    raise dj_exc_value.with_traceback(traceback) from exc_value
  File "/home/andrade/Desktop/easy-talk-main/django-easy-talk/.venv/lib/python3.12/site-packages/django/db/backends/utils.py", line 105, in _execute
    return self.cursor.execute(sql, params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/andrade/Desktop/easy-talk-main/django-easy-talk/.venv/lib/python3.12/site-packages/django/db/backends/sqlite3/base.py", line 360, in execute
    return super().execute(query, params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
django.db.utils.IntegrityError: NOT NULL constraint failed: terapia_consulta.data_hora_agendada

======================================================================
ERROR: test_segundos_e_microssegundos_sao_desprezados (terapia.tests.test_consulta_model.ConsultaModelTest.test_segundos_e_microssegundos_sao_desprezados)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/home/andrade/Desktop/easy-talk-main/django-easy-talk/terapia/tests/test_consulta_model.py", line 89, in test_segundos_e_microssegundos_sao_desprezados
    data_hora_agendada=self.psicologo_sempre_disponivel.proxima_data_hora_agendavel.replace(second=30,
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'replace'

----------------------------------------------------------------------
Ran 9 tests in 3.446s

FAILED (errors=3)
Destroying test database for alias 'default'...
Found 9 test(s).
User ana.silva@example.com created
Psicologo Ana Silva created with availability
User bruno.santos@example.com created
Psicologo Bruno Santos created with availability
User carla.oliveira@example.com created
Psicologo Carla Oliveira created with availability
User daniela.costa@example.com created
Psicologo Daniela Costa created with availability
User elias.souza@example.com created
Psicologo Elias Souza created with availability
User fernanda.lima@example.com created
Psicologo Fernanda Lima created with availability
User gabriela.rocha@example.com created
Psicologo Gabriela Rocha created with availability
User hugo.martins@example.com created
Psicologo Hugo Martins created with availability
User isabela.ferreira@example.com created
Psicologo Isabela Ferreira created with availability
User joao.pereira@example.com created
Psicologo João Pereira created with availability
User karina.alves@example.com created
Psicologo Karina Alves created with availability
User lucas.mendes@example.com created
Psicologo Lucas Mendes created with availability
User mariana.costa@example.com created
Psicologo Mariana Costa created with availability
User nicole.ramos@example.com created
Psicologo Nicole Ramos created with availability
User olivia.dias@example.com created
Psicologo Olivia Dias created with availability
User pedro.gomes@example.com created
Psicologo Pedro Gomes created with availability
User quiteria.vargas@example.com created
Psicologo Quitéria Vargas created with availability
User rafaela.nunes@example.com created
Psicologo Rafaela Nunes created with availability
User samara.torres@example.com created
Psicologo Samara Torres created with availability
User mariana.barbosa@example.com created
Psicologo Mariana Barbosa created with availability
User arthur.muller@example.com created
Psicologo Arthur Müller created with availability
User sofia.bianchi@example.com created
Psicologo Sofia Bianchi created with availability
User david.okafor@example.com created
Psicologo David Okafor created with availability
User aisha.bello@example.com created
Psicologo Aisha Bello created with availability
User kenji.tanaka@example.com created
Psicologo Kenji Tanaka created with availability
User mei.ling@example.com created
Psicologo Mei Ling created with availability
User rahul.sharma@example.com created
Psicologo Rahul Sharma created with availability
User priya.patel@example.com created
Psicologo Priya Patel created with availability
User carlos.silva@example.com created
Psicologo Carlos Silva created with availability
User juliana.costa@example.com created
Psicologo Juliana Costa created with availability
User alejandro.rodriguez@example.com created
Psicologo Alejandro Rodriguez created with availability
User camila.fernandez@example.com created
Psicologo Camila Fernandez created with availability
System check identified no issues (0 silenced).
DEBUG: Saving consulta with data_hora_agendada=2025-11-30 18:00:00+00:00
DEBUG: Saving consulta with data_hora_agendada=2025-11-30 19:00:00+00:00

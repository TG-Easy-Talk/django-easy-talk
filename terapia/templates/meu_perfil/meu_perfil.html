{% extends 'geral/base.html' %}
{% load static %}
{% block titulo %} {{ psicologo }} {% endblock %}

{% block body_classes %}bg-body-tertiary overflow-x-hidden{% endblock body_classes %}

{% block pos_cabecalho %}
    {% if not psicologo.esta_com_perfil_completo %}
        <div style="--bs-alert-bg: var(--bs-warning);" class="alert alert-warning d-flex align-items-center rounded-0 mb-0 border-0" role="alert">
            <i class="bi bi-exclamation-triangle-fill me-3"></i>
            Você ainda não completou o seu perfil. Complete-o para que os pacientes possam agendar consultas com você.
        </div>
    {% endif %}
{% endblock %}

{% block conteudo %}
    <div class="row g-5">
        <div class="col-12 col-lg-4 d-flex flex-column justify-content-center justify-content-lg-start align-items-center">
            <div class="d-flex align-items-center justify-content-center gap-4">
                <img class="rounded-circle mx-auto object-fit-cover"
                    style="width: 5rem; aspect-ratio: 1;"
                    src="{{ form.instance.get_url_foto_propria_ou_padrao }}"
                    alt="Foto de perfil">

                <div class="flex-grow-1">
                    <h4 class="fw-bold">{{ form.instance.nome_completo }}</h4>

                    <div class="h6 text-body-secondary">
                        <span class="">CRP {{ form.instance.crp }}</span>
                    </div>
                </div>
            </div>
            <ul id="meu-perfil-nav" class="nav nav-pills flex-column align-items-start gap-3 mt-5">
                <li class="nav-item">
                    <a href="{% url 'meu_perfil_info_profissional' %}" class="nav-link {% block info_profissional %}{% endblock %} rounded-pill d-flex align-items-center">
                        <i class="fs-4 bi bi-person-fill me-3"></i>
                        Informações profissionais
                    </a>
                </li>
                <li class="nav-item">
                    <a href="{% url 'meu_perfil_foto' %}" class="nav-link {% block foto_de_perfil %}{% endblock %} rounded-pill d-flex align-items-center">
                        <i class="fs-4 bi bi-camera-fill me-3"></i>
                        Foto de perfil
                    </a>
                </li>
                <li class="nav-item">
                    <a href="{% url 'meu_perfil_foto' %}" class="nav-link {% block disponibilidade %}{% endblock %} rounded-pill d-flex align-items-center">
                        <i class="fs-4 bi bi-calendar-fill me-3"></i>
                        Disponibilidade
                    </a>
                </li>
            </ul>
        </div>
        <div class="col-12 col-lg-8">

            <h1>{% block form_titulo %}{% endblock %}</h1>
            <p class="text-body-secondary mb-4">{% block form_descricao %}{% endblock %}</p>

            <form class="d-flex flex-column align-items-center" id="PsicologoChangeForm" enctype="multipart/form-data" method="post">
                {% csrf_token %}
                <div class="bg-body-secondary p-4 rounded-3 border w-100">
                    {{ form }}
                    <button type="submit" class="w-100 btn text-white btn-primary">Salvar alterações</button>
                </div>
            </form>
        </div>
    </div>

    <link rel="stylesheet" href="{% static 'css/meu_perfil.css' %}">
    <link rel="stylesheet" href="{% static 'css/multicombobox.css' %}">
    <script defer src="{% static 'js/multicombobox.js' %}"></script>
{% endblock %}
